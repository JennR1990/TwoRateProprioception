---
title: "Two Rate Proprioception Paper"
output:
  word_document: default
  html_document:
    df_print: paged
  pdf_document: default
---
# Prepping Data

Here we will make sure we have all the functions and scripts loaded we need

```{r eval=TRUE, echo=FALSE}
source('R/Analysis_Scripts.R')
source('R/Plots.R', encoding = 'UTF-8')
source('R/Repeated_Measures_Combine.R')
source('R/shared.R')
source('R/PropModelandfig.R', encoding = 'UTF-8')
library('ez')
library('RateRate')
library('svglite')
library('effsize')
library('SMCL')
```

We will now download and load the data and make the color scheme available
```{r eval=TRUE, echo=FALSE}
loadcolors()
downloadOSFdata()
pause_reaches<- Loaddata(group='pause')
pause<- Loaddata(group='pause', task = 'pre_post_Prop')
active_reaches<- Loaddata(group='active')
passive_reaches<- Loaddata()
nocursor_reaches<- Loaddata(group='nocursor')
nocursorI_reaches<- Loaddata(group='nocursor', task = 'NI_reaches')
passive_localization<- Loaddata(task = 'localization')
active_localization<- Loaddata(group='active', task = 'localization')
nocursor_nocursors<- Loaddata(group='nocursor', task = 'nocursors')
NoCursor<- Loaddata(group='NoCursor', task = 'pre_post_Prop')
nocursorI_nocursors<- Loaddata(group='nocursor', task = 'NI_nocursors')
NewNoC<- Loaddata(group='NewNoC', task = 'pre_post_Prop') 

### Create Data to use for ANOVA's and t-tests
ANOVAdata<- PrepdataforANOVA(active_reaches, passive_reaches, pause_reaches[33:320,], nocursor_reaches[33:320,],nocursor_nocursors,nocursorI_reaches[33:320,],nocursorI_nocursors)
ANOVAPdata<- PrepdataforPropANOVA(active_localization,passive_localization)
TtestPdata<- PrepdataforPropT(active_localization, passive_localization)
Ttestdata<- PrepdataforT(active_reaches, passive_reaches, pause_reaches[33:320,], nocursor_reaches[33:320,], nocursor_nocursors, nocursorI_reaches[33:320,],nocursorI_nocursors)
Allmeans<- Allmeans()
```

# Exploration of the data

### First we will look at each group of data and what each participant is doing
```{r eval=TRUE, echo=FALSE}
PlotIndividualdata(pause_reaches[33:320,],3, "Individual Pause Data") #individual traces for pause data
PlotIndividualdata(active_reaches,1, "Individual Active Data")
PlotIndividualdata(passive_reaches,2, "Individual Passive Data")
PlotIndividualdata(nocursor_reaches[33:320,],4, "Individual No-Cursor Data")
PlotIndividualdata(nocursorI_reaches[33:320,],5, "Individual No-Cursor_I Data")
```

### Now we can look at the mean of each of the groups and of all the data we collected
```{r eval=TRUE, echo=FALSE}
Allmeans[,c(1,4,7,10,16,19)]
```

# How did the participants perform as a group?
### Here we will look at how well the participants performed when the cursor was present
```{r eval=TRUE, echo=FALSE}
PlotallreachesCI(active_reaches,passive_reaches, pause_reaches[33:320,],nocursor_reaches[33:320,],nocursorI_reaches[33:320,])
```

### Here we will look at how the participants performed on the Hand localization test trials
```{r eval=TRUE, echo=FALSE}
PlotallTapCI(passive_localization, active_localization) #has no model output
```

### Here we will look at how the participants performed when there was no hand cursor, during the open-loop test trials
```{r eval=TRUE, echo=FALSE}
Plotnocursors(active_reaches, nocursor_nocursors, nocursorI_nocursors)
```

# Hand Localization Analysis of learning
### Was there a group difference in learning across the four blocks of interest?
```{r eval=TRUE, echo=FALSE}
Plotexp1CI(active_reaches, passive_reaches, pause_reaches[33:320,])
```

###ANOVA comparing active-passive-pause reach data
```{r eval=TRUE, echo=FALSE}
FullHLANOVA<-ANOVAanalysis(ANOVAdata[ANOVAdata$Experiment == 'Active' | ANOVAdata$Experiment == 'Passive' | ANOVAdata$Experiment == 'Pause',])
FullHLANOVA
```

###ANOVA comparing active-passive reach data
```{r eval=TRUE, echo=FALSE}
FullH1LANOVA<-ANOVAanalysis(ANOVAdata[ANOVAdata$Experiment == 'Active' | ANOVAdata$Experiment == 'Passive',])
FullH1LANOVA
```

###ANOVA comparing passive-pause reach data
```{r eval=TRUE, echo=FALSE}
FullH2LANOVA<-ANOVAanalysis(ANOVAdata[ANOVAdata$Experiment == 'Passive' | ANOVAdata$Experiment == 'Pause',])
FullH2LANOVA
```

### ANOVA comparing active-pause reach data
```{r eval=TRUE, echo=FALSE}
FullH3LANOVA<-ANOVAanalysis(ANOVAdata[ANOVAdata$Experiment == 'Active' | ANOVAdata$Experiment == 'Pause',])
FullH3LANOVA
```

So there is a difference between the Active group and the other two groups -- since we are mostly interested in the Active and Passive groups, we will focus on them for our follow-up tests

### Follow-up T-Tests
```{r eval=TRUE, echo=FALSE}
  IndependentT(Ttestdata, 'Active', 'Passive', 'Reach')
    #IndependentT(Ttestdata, 'Active', 'Pause', 'Reach')
      #IndependentT(Ttestdata, 'Pause', 'Passive', 'Reach')
```

It seems that there is a difference between reach performance for the active vs. passive groups.  This is seen clearly in the above figure and is potentially due to the active self-generated movement required to execute the active localization task. 


## Hand localization Test Trial Analysis
First we wanted to use an ANOVA to see if there was a difference between the four time points and the two groups of hand localizations

### ANOVA comparing Active and Passive Hand Localizations
```{r eval=TRUE, echo=FALSE}
FullPANOVA<-ANOVAanalysis(ANOVAPdata)
FullPANOVA
```

As is seems there is a significant interaction and a significant effect of experiment and time point meaning we need to see where this is occuring, we can do this by doing some follow-up T-tests.

### Follow-Up Independent and Paired T-Tests to look for differences between the groups and learning within each group
```{r eval=TRUE, echo=FALSE}
tpanalyzedata(TtestPdata)
```
